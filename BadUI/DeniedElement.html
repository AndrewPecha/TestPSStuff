<html>
    <script src="/lib/js/jquery.min.js"></script>

    <style>
        #MainDiv {
            width: 50px;
            height: 50px;
            border: 1px solid black;
        }

        /*to calculate width and height for a square element:
        (parentElementSize) - (insideBorder x 2)*/
        .denied::before {
            position: absolute;
            width: 44px;
            height: 44px;
            content: '';
            border: 3px solid red;
        }

        .denied::after {
            position: absolute;
            width: 65px;
            top: 32.5px;
            left: 1px;
            content: '';
            border-top: 3px solid red;
            transform: rotate(-45deg);
        } 

        .denied {
            animation: fadeOut 1.4s;
        }

        #InnerSvg {
            opacity: 0;
            animation: fadeOut 1.4s;
        }

        .deniedSvg {
            animation: fadeOut 1.4s;
        }

        @keyframes fadeOut {
            from { opacity: 1 }
            to { opacity: 0}
        }       
    </style>
    <script>
        //https://stackoverflow.com/a/6303311
        function addDenied() {
            // // if (!$('#InnerDiv').hasClass('denied'))
            // //     $('#InnerDiv').addClass('denied');

            // // else {
            // //     var el = $('#InnerDiv');
            // //     el.each(function() {
            // //         this.style.animation = 'none';
            // //         this.offsetHeight; /* trigger reflow */
            // //         this.style.animation = null; 
            // //     })
                
            // // }

            // if (!$('#InnerSvg').hasClass('deniedSvg'))
            //     $('#InnerSvg').addClass('deniedSvg');

            // else {
            //     var el = $('#InnerSvg');
            //     el.each(function() {
            //         debugger;
            //         this.style.animation = 'none';
            //         this.offsetHeight; /* trigger reflow */
            //         this.style.animation = null; 
            //     });                
            // }

            $('#MainDiv').each(function() {
                this.innerHTML = '<svg height="50" width="50" id="InnerSvg"><line x1="0" y1="50" x2="50" y2="0" style="stroke:rgb(255,0,0);stroke-width:1"></line><polygon points="0,0 0,50 50,50 50,0" style="fill:transparent;stroke:red;stroke-width:1" /></svg>';
            });
        }

        $(document).ready(function() {
            $('#InnerDiv').on("webkitAnimationEnd oanimationend msAnimationEnd animationend",
                function() {
                    $('#InnerDiv').removeClass('denied');
                }
            );

            $('#InnerSvg').on("webkitAnimationEnd oanimationend msAnimationEnd animationend",
                function() {
                    $('#InnerSvg').removeClass('deniedSvg');
                }
            );
        })
    </script>
    
    <body>
        <div id='MainDiv'>
            <!-- <svg height="50" width="50" id="InnerSvg">
                <line x1="0" y1="50" x2="50" y2="0" style="stroke:rgb(255,0,0);stroke-width:1"></line>
                <polygon points="0,0 0,50 50,50 50,0" style="fill:transparent;stroke:red;stroke-width:1" />
            </svg> -->
            <!-- <div id='InnerDiv'></div> -->
        </div>

        <br/>
        <input type="button" value="click!" onclick='addDenied()'>
    </body>

 
</html>